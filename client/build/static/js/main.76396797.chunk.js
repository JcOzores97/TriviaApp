(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],[,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),c=n.n(a),o=n(10),i=n.n(o),s=n(3),u=n(2),l=n(4),d=n.n(l),f=n(9),p=n(7);n(17);function j(e){return m.apply(this,arguments)}function m(){return(m=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/artist/".concat(t,"/songs/4"));case 2:if(404!==(n=e.sent).status){e.next=5;break}throw new Error("artist not found");case 5:if(500!==n.status){e.next=7;break}throw new Error("server error");case 7:return e.next=9,n.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t,n){return b.apply(this,arguments)}function b(){return(b=Object(p.a)(d.a.mark((function e(t,n,r){var a,c,o,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="api/artist/".concat(n,"/lyrics/").concat(r),c=JSON.stringify({songs:t}),e.next=4,fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:c});case 4:return o=e.sent,e.next=7,o.json();case 7:if(0!==(i=e.sent).songs.length){e.next=10;break}throw new Error("Insufficient lyrics");case 10:return e.abrupt("return",i.songs);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,t){var n=v(t,3).map((function(e){return{song:e}}));return y([].concat(Object(f.a)(n),[e]))}function v(e,t){return function(e,t){return y(Array.from(Array(t),(function(e,t){return t}))).slice(0,e)}(t,e.length-1).map((function(t){return e[t]}))}function y(e){for(var t=Object(f.a)(e),n=0;n<e.length-2;n++){var r=Math.floor(Math.random()*(e.length-n)+n),a=[t[n],t[r]];t[r]=a[0],t[n]=a[1]}return t}var g=function(e){var t=e.appDispatch,n=e.setFormSubmitted,c=Object(a.useState)(""),o=Object(s.a)(c,2),i=o[0],u=o[1];function l(){return(l=Object(p.a)(d.a.mark((function e(t,n){var r,a,c,o,i,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j(t.replace(" ","%20"));case 3:return r=e.sent,a=v(r,12),e.next=7,O(a,t.toLowerCase().replace(/" "/g,""),5);case 7:c=e.sent,o=c.map((function(e){return e.song})),i=r.filter((function(e){return!1===o.includes(e)})),s=c.map((function(e){return h(e,i)})),n({type:"OPTIONS_READY",payload:{gameOptions:s,artistName:t}}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),n({type:"OPTIONS_ERROR",payload:{error:e.t0,artistName:t}});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}return Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),0!==i.replace(/\s/g,"").length&&(n(!0),function(e,t){l.apply(this,arguments)}(i,t))},className:"artist-form",children:[Object(r.jsx)("h2",{className:"artist-form__title",children:"Trivia App"}),Object(r.jsx)("label",{className:"artist-form__label",htmlFor:"artist-input",children:"Introduce un artista"}),Object(r.jsx)("input",{id:"artist-input",className:"artist-form__input",type:"text",value:i,onChange:function(e){return u(e.target.value)}}),Object(r.jsx)("button",{className:"artist-form__submit",children:"Jugar!"})]})},x=(n(18),function(e){var t=e.currentRound,n=e.roundsQuantity,a=Array.from(Array(n),(function(e,t){return t+1}));return Object(r.jsx)("div",{className:"round-indicator",children:a.map((function(e){return Object(r.jsx)("div",{className:e===t?"round-indicator__round--active":"round-indicator__round",children:e},e)}))})}),N=(n(19),function(e){var t=e.children,n=e.info;return Object(r.jsxs)("div",{className:"round-info",children:[t,Object(r.jsx)("div",{className:"round-info__info",children:n})]})});function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function R(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var E=a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),_=a.createElement("circle",{cx:12,cy:13,r:7}),S=a.createElement("polyline",{points:"12 10 12 13 14 13"}),I=a.createElement("line",{x1:7,y1:4,x2:4.25,y2:6}),k=a.createElement("line",{x1:17,y1:4,x2:19.75,y2:6});function D(e,t){var n=e.title,r=e.titleId,c=R(e,["title","titleId"]);return a.createElement("svg",w({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-alarm",width:32,height:32,viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"#ffffff",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",ref:t,"aria-labelledby":r},c),n?a.createElement("title",{id:r},n):null,E,_,S,I,k)}var T=a.forwardRef(D);n.p;function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function A(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var L=a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C=a.createElement("path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z"});function M(e,t){var n=e.title,r=e.titleId,c=A(e,["title","titleId"]);return a.createElement("svg",P({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-star",width:32,height:32,viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"#ffffff",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",ref:t,"aria-labelledby":r},c),n?a.createElement("title",{id:r},n):null,L,C)}var U=a.forwardRef(M);n.p,n(20);function J(e,t){switch(t.type){case"TICK":return Object(u.a)(Object(u.a)({},e),{},{secondsRemaining:e.secondsRemaining-1});case"ROUND_STARTS":return Object(u.a)({},q);case"OPTION_SELECTED":return Object(u.a)(Object(u.a)({},e),{},{attempts:e.attempts+1,selectedOptions:e.selectedOptions.concat(t.payload.optionIndex)});default:throw new Error("invalid action in round reducer")}}var q={attempts:0,secondsRemaining:45,selectedOptions:[]};function z(e,t){return t?0:0!==e||t?10-2*e:10}var B=function(e){var t=e.currentRound,n=e.gameDispatch,c=e.gameScore,o=e.roundOptions,i=e.correctOption,u=Object(a.useReducer)(J,q),l=Object(s.a)(u,2),d=l[0],f=l[1],p=Object(a.useRef)(0);function j(e){var t=e.target.value;if(t!==i.song)f({type:"OPTION_SELECTED",payload:{optionIndex:o.findIndex((function(e){return e.song===t}))}});else{var r=z(p.current,!1);n({type:"ENDED_ROUND",payload:{roundScore:r}})}}return p.current=d.attempts,Object(a.useEffect)((function(){f({type:"ROUND_STARTS"});var e=setInterval((function(){f({type:"TICK"})}),1e3);return function(){clearInterval(e)}}),[t]),Object(a.useEffect)((function(){if(0===d.secondsRemaining){var e=z(p.current,!0);n({type:"ENDED_ROUND",payload:{roundScore:e}})}}),[d.secondsRemaining,n]),Object(r.jsxs)("div",{className:"round",children:[Object(r.jsx)(x,{currentRound:t,roundsQuantity:5}),Object(r.jsxs)("div",{className:"round__round-info-container",children:[Object(r.jsx)(N,{info:c,children:Object(r.jsx)(U,{})}),Object(r.jsx)(N,{info:d.secondsRemaining,children:Object(r.jsx)(T,{})})]}),Object(r.jsx)("div",{className:"round__lyrics",children:i.lyrics.map((function(e,t){return Object(r.jsx)("p",{children:e},t)}))}),Object(r.jsx)("div",{className:"round__options-container",children:o.map((function(e,t){return Object(r.jsx)("button",{value:e.song,disabled:d.selectedOptions.includes(t),onClick:j,className:"round__option",style:{"--animation-order":t+1},children:e.song},t)}))})]})},F=(n(21),function(e){var t=e.gameScore;return Object(r.jsxs)("div",{className:"final-results",children:[Object(r.jsx)("div",{className:"final-results__star-container",children:Object(r.jsx)(U,{})}),Object(r.jsx)("h2",{children:"Termin\xf3 el juego"}),Object(r.jsxs)("h3",{children:["Obtuviste ",t," puntos"]}),Object(r.jsx)("h3",{children:"Refresca la p\xe1gina para jugar de nuevo"})]})});n(22);function H(e,t){switch(t.type){case"ENDED_ROUND":return{currentRound:e.currentRound+1,gameScore:e.gameScore+t.payload.roundScore};default:throw new Error}}var K={currentRound:1,gameScore:0},Q=function(e){var t=e.artistName,n=e.gameOptions,c=Object(a.useReducer)(H,K),o=Object(s.a)(c,2),i=o[0],u=o[1];return Object(r.jsx)("div",{className:"game",children:i.currentRound<=5?Object(r.jsx)(B,{currentRound:i.currentRound,gameDispatch:u,gameScore:i.gameScore,roundOptions:n[i.currentRound-1],correctOption:n[i.currentRound-1].find((function(e){return"lyrics"in e}))},i.currentRound):Object(r.jsx)(F,{gameScore:i.gameScore,artistName:t})})},W=(n(23),function(e){var t=e.artistName,n=e.type,a='Mmm... parece que no hemos encontrado un artista con el nombre "'.concat(t,'". \n\tVerifica que lo hayas escrito correctamente o refresca la p\xe1gina e intenta con otro artista!');return Object(r.jsx)("div",{className:"error-screen",children:Object(r.jsx)("h2",{className:"error-screen__text",children:"artist not found"===n?a:"Insufficient lyrics"===n?"Lamentablemente no contamos con suficientes letras de canciones del artista seleccionado. \n\t\t\xa1Refresca la p\xe1gina e intenta con otro artista!":"Lyrics provider error"===n?"Parece que ocurre un error en el proveedor de las letras, intente jugar nuevamente m\xe1s tarde":"Momentaneamente el servicio no est\xe1 disponible, intenta nuevamente m\xe1s tarde"})})}),Y=(n(24),function(){return Object(r.jsxs)("div",{className:"loader",children:[Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{})]})});n(25);function V(e,t){switch(t.type){case"OPTIONS_READY":return Object(u.a)(Object(u.a)({},e),{},{gameOptions:t.payload.gameOptions,artistName:t.payload.artistName});case"OPTIONS_ERROR":return Object(u.a)(Object(u.a)({},e),{},{error:t.payload.error,artistName:t.payload.artistName});default:throw new Error("invalid action in appReducer")}}var G={artistName:null,gameOptions:null,error:null};var X=function(){var e=Object(a.useReducer)(V,G),t=Object(s.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(!1),i=Object(s.a)(o,2),u=i[0],l=i[1];return Object(r.jsx)("div",{className:"App",children:n.gameOptions?Object(r.jsx)(Q,{artistName:n.artistName,gameOptions:n.gameOptions}):n.error?Object(r.jsx)(W,{artistName:n.artistName,type:n.error.message}):u?Object(r.jsx)(Y,{}):Object(r.jsx)(g,{appDispatch:c,setFormSubmitted:l})})};i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(X,{})}),document.getElementById("root"))}],[[26,1,2]]]);
//# sourceMappingURL=main.76396797.chunk.js.map